<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>任务管理抽奖系统</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 导航栏 -->
        <header class="header">
            <h1>🎯 任务管理抽奖系统</h1>
            <nav class="nav-tabs">
                <button class="tab-btn active" data-tab="tasks">任务管理</button>
                <button class="tab-btn" data-tab="prizes">奖品管理</button>
                <button class="tab-btn" data-tab="wallet">💰 钱包</button>
                <button class="tab-btn" data-tab="history">抽奖历史</button>
            </nav>
        </header>

        <!-- 任务管理标签页 -->
        <div id="tasks-tab" class="tab-content active">
            <div class="section">
                <h2>创建新任务</h2>
                <form id="task-form" class="form">
                    <div class="form-group">
                        <label for="task-title">任务标题 *</label>
                        <input type="text" id="task-title" required placeholder="输入任务标题">
                    </div>
                    <div class="form-group">
                        <label for="task-description">任务描述</label>
                        <textarea id="task-description" rows="3" placeholder="输入任务描述（可选）"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="task-weight">权重 *</label>
                        <input type="number" id="task-weight" min="1" value="1" required>
                        <small>权重越大，被抽中的概率越高</small>
                    </div>
                    <button type="submit" class="btn btn-primary">创建任务</button>
                </form>
            </div>

            <div class="section">
                <div class="section-header">
                    <h2>待抽取任务</h2>
                    <button id="draw-task-btn" class="btn btn-draw" disabled>🎲 抽取任务</button>
                </div>
                <div id="pending-tasks" class="task-list"></div>
            </div>

            <div class="section">
                <h2>进行中的任务</h2>
                <div id="in-progress-tasks" class="task-list"></div>
            </div>

            <div class="section">
                <h2>已完成任务</h2>
                <div id="completed-tasks" class="task-list"></div>
            </div>
        </div>

        <!-- 奖品管理标签页 -->
        <div id="prizes-tab" class="tab-content">
            <div class="section">
                <h2>创建新奖品</h2>
                <form id="prize-form" class="form">
                    <div class="form-group">
                        <label for="prize-name">奖品名称 *</label>
                        <input type="text" id="prize-name" required placeholder="输入奖品名称">
                    </div>
                    <div class="form-group">
                        <label for="prize-description">奖品描述</label>
                        <textarea id="prize-description" rows="3" placeholder="输入奖品描述（可选）"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="prize-weight">权重 *</label>
                        <input type="number" id="prize-weight" min="1" value="1" required>
                        <small>权重越大，被抽中的概率越高</small>
                    </div>
                    <button type="submit" class="btn btn-primary">创建奖品</button>
                </form>
            </div>

            <div class="section">
                <h2>奖品列表</h2>
                <div id="prizes-list" class="prize-list"></div>
            </div>
        </div>

        <!-- 钱包标签页 -->
        <div id="wallet-tab" class="tab-content">
            <div class="section">
                <h2>💰 我的钱包</h2>
                <div class="wallet-balance">
                    <div class="balance-display">
                        <span class="balance-label">当前余额：</span>
                        <span class="balance-amount" id="wallet-balance">加载中...</span>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>钱包操作</h2>
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn btn-primary" id="refresh-wallet-btn">刷新余额</button>
                    <button class="btn btn-secondary" id="view-transactions-btn">查看交易记录</button>
                </div>
            </div>

            <div class="section">
                <h2>交易记录</h2>
                <div id="wallet-transactions" class="history-list"></div>
            </div>
        </div>

        <!-- 抽奖历史标签页 -->
        <div id="history-tab" class="tab-content">
            <div class="section">
                <h2>抽奖历史记录</h2>
                <div id="lottery-history" class="history-list"></div>
            </div>
        </div>
    </div>

    <!-- 抽取任务动画模态框 -->
    <div id="draw-modal" class="modal">
        <div class="modal-content">
            <h2>正在抽取任务...</h2>
            <div id="draw-animation" class="draw-animation"></div>
            <div id="draw-result" class="draw-result"></div>
        </div>
    </div>

    <!-- 任务详情模态框 -->
    <div id="task-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="task-detail-content"></div>
        </div>
    </div>

    <!-- 抽奖模态框 -->
    <div id="lottery-modal" class="modal">
        <div class="modal-content">
            <h2>🎉 抽奖中...</h2>
            <div id="lottery-animation" class="lottery-animation"></div>
            <div id="lottery-result" class="lottery-result"></div>
        </div>
    </div>

    <!-- 时间设定模态框 -->
    <div id="time-limit-modal" class="modal">
        <div class="modal-content">
            <h2>设定完成时间</h2>
            <form id="time-limit-form">
                <div class="form-group">
                    <label for="time-limit">时间限制（分钟）*</label>
                    <input type="number" id="time-limit" min="1" required>
                </div>
                <button type="submit" class="btn btn-primary">开始任务</button>
            </form>
        </div>
    </div>

    <!-- 编辑任务模态框 -->
    <div id="edit-task-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>编辑任务</h2>
            <form id="edit-task-form">
                <input type="hidden" id="edit-task-id">
                <div class="form-group">
                    <label for="edit-task-title">任务标题 *</label>
                    <input type="text" id="edit-task-title" required placeholder="输入任务标题">
                </div>
                <div class="form-group">
                    <label for="edit-task-description">任务描述</label>
                    <textarea id="edit-task-description" rows="3" placeholder="输入任务描述（可选）"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-task-weight">权重 *</label>
                    <input type="number" id="edit-task-weight" min="1" value="1" required>
                    <small>权重越大，被抽中的概率越高</small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">保存</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('edit-task-modal').classList.remove('active')">取消</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 编辑奖品模态框 -->
    <div id="edit-prize-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>编辑奖品</h2>
            <form id="edit-prize-form">
                <input type="hidden" id="edit-prize-id">
                <div class="form-group">
                    <label for="edit-prize-name">奖品名称 *</label>
                    <input type="text" id="edit-prize-name" required placeholder="输入奖品名称">
                </div>
                <div class="form-group">
                    <label for="edit-prize-description">奖品描述</label>
                    <textarea id="edit-prize-description" rows="3" placeholder="输入奖品描述（可选）"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-prize-weight">权重 *</label>
                    <input type="number" id="edit-prize-weight" min="1" value="1" required>
                    <small>权重越大，被抽中的概率越高</small>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button type="submit" class="btn btn-primary">保存</button>
                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('edit-prize-modal').classList.remove('active')">取消</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/taskManager.js"></script>
    <script src="js/prizeManager.js"></script>
    <script src="js/lottery.js"></script>
    <script src="js/wallet.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>

